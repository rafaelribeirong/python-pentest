import socket

def ftp_interaction(ip, port):
    try:
        # Cria um socket TCP
        s = socket.socket()
        s.settimeout(5)  # Define um tempo limite de 5 segundos para a conexão

        # Tenta se conectar ao IP e porta especificados
        s.connect((ip, port))

        # Recebe o banner inicial
        banner = s.recv(1024).decode().strip()
        print(f"Banner recebido: {banner}")

        # Envia comando USER
        s.send(b'USER anonymous\r\n')
        response = s.recv(1024).decode().strip()
        print(f"Resposta do comando USER: {response}")

        # Envia comando PASS
        s.send(b'PASS anonymous\r\n')
        response = s.recv(1024).decode().strip()
        print(f"Resposta do comando PASS: {response}")

        return "Interação com FTP concluída"
    except Exception as e:
        return f"Erro ao conectar em {ip}:{port} - {e}"
    finally:
        s.close()

if __name__ == "__main__":
    ip = input("Digite o endereço IP: ")
    port = 21  # Porta padrão para FTP

    result = ftp_interaction(ip, port)
    print(result)
